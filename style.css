/* ════════════════════════════════════════════════════
   AI MARIO — style.css
   Connected to: index.html (all classes/ids documented)
════════════════════════════════════════════════════ */

/* ── Reset ───────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

/* ── Variables ───────────────────────────────────── */
:root {
  --red:       #e52222;
  --blue:      #2b5ce6;
  --yellow:    #f7c948;
  --green:     #2dc653;
  --sky:       #6d8fff;
  --dark:      #1a1a2e;
  --panel:     #16213e;
  --border:    #0f3460;
  --gold:      #ffd700;
  --glow-gold: 0 0 20px rgba(247,201,72,0.8);
  --glow-red:  0 0 20px rgba(229,34,34,0.6);
  --px-shadow: 4px 4px 0 rgba(0,0,0,0.5);
  --header-h:  62px;
}

html, body { height: 100%; }

body {
  font-family: 'Outfit', sans-serif;
  background: var(--dark);
  color: #e8eaf6;
  overflow-x: hidden;
}

/* subtle background glow */
body::before {
  content: '';
  position: fixed; inset: 0; pointer-events: none; z-index: 0;
  background:
    radial-gradient(circle at 15% 20%, rgba(109,143,255,.13) 0%, transparent 50%),
    radial-gradient(circle at 85% 70%, rgba(229,34,34,.09) 0%, transparent 50%);
}

/* ════════════════════════════════════════════════════
   LS STUDIO SPLASH  (#ls-splash)
════════════════════════════════════════════════════ */
#ls-splash {
  position: fixed; inset: 0; z-index: 9999;
  background: #080810;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  overflow: hidden;
  transition: opacity .8s ease, visibility .8s ease;
}
#ls-splash.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

/* animated grid lines */
#ls-splash::before {
  content: '';
  position: absolute; inset: 0;
  background-image:
    linear-gradient(rgba(109,143,255,.07) 1px, transparent 1px),
    linear-gradient(90deg, rgba(109,143,255,.07) 1px, transparent 1px);
  background-size: 60px 60px;
  animation: grid-drift 8s linear infinite;
}
@keyframes grid-drift { to { background-position: 60px 60px; } }

/* radial glow centre */
#ls-splash::after {
  content: ''; position: absolute; inset: 0; pointer-events: none;
  background: radial-gradient(circle at center, rgba(43,92,230,.22) 0%, transparent 65%);
}

/* .splash-inner — centres content */
.splash-inner {
  position: relative; z-index: 2;
  display: flex; flex-direction: column; align-items: center;
}

/* .ls-logo-mark — the blue LS tile */
.ls-logo-mark {
  width: clamp(80px,13vw,110px);
  height: clamp(80px,13vw,110px);
  border-radius: 22px;
  background: linear-gradient(135deg, var(--blue), var(--sky));
  display: flex; align-items: center; justify-content: center;
  font-family: 'Press Start 2P', monospace;
  font-size: clamp(22px,5vw,36px); color: #fff;
  box-shadow: 0 0 0 1px rgba(255,255,255,.15),
              0 0 50px rgba(43,92,230,.9),
              0 20px 60px rgba(0,0,0,.6);
  animation: mark-in .7s cubic-bezier(.175,.885,.32,1.275) .3s both;
  overflow: hidden; position: relative;
}
/* shine sweep */
.ls-logo-mark::after {
  content: '';
  position: absolute; top: -50%; left: -60%;
  width: 40%; height: 200%;
  background: linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);
  transform: skewX(-20deg);
  animation: shine 3s ease-in-out 1.2s infinite;
}
@keyframes shine { 0%{left:-60%} 40%,100%{left:160%} }
@keyframes mark-in {
  from { transform: scale(.3) rotate(-15deg); opacity: 0; }
  to   { transform: scale(1)  rotate(0deg);  opacity: 1; }
}

/* .ls-text, .ls-name, .ls-sub */
.ls-text { margin-top: 26px; text-align: center; animation: text-in .6s ease .9s both; }
@keyframes text-in { from{transform:translateY(18px);opacity:0} to{opacity:1;transform:none} }
.ls-name {
  font-family: 'Press Start 2P', monospace;
  font-size: clamp(15px,4vw,28px); color: #fff;
  letter-spacing: 6px; text-shadow: 0 0 28px rgba(109,143,255,.9);
  margin-bottom: 8px;
}
.ls-sub { font-size: 12px; color: rgba(232,234,246,.4); letter-spacing: 4px; text-transform: uppercase; }

/* .ls-bar-wrap, .ls-bar — loading bar */
.ls-bar-wrap {
  margin-top: 44px;
  width: clamp(200px, 50vw, 300px);
  height: 4px; background: rgba(255,255,255,.08);
  border-radius: 2px; overflow: hidden;
  animation: text-in .4s ease 1.2s both;
}
.ls-bar {
  height: 100%; width: 0%;
  background: linear-gradient(90deg, var(--blue), var(--sky), var(--yellow));
  box-shadow: 0 0 10px rgba(109,143,255,.9);
  transition: width .1s linear;
}

/* .ls-load-txt — status message (#lsTxt) */
.ls-load-txt {
  margin-top: 14px;
  font-family: 'Press Start 2P', monospace;
  font-size: 8px; color: rgba(232,234,246,.4);
  letter-spacing: 2px; min-height: 16px;
  animation: text-in .4s ease 1.2s both;
}

/* .ls-presents */
.ls-presents {
  position: absolute; bottom: 36px; left: 50%; transform: translateX(-50%);
  font-size: 11px; color: rgba(232,234,246,.18);
  letter-spacing: 3px; white-space: nowrap;
  animation: text-in .4s ease 1.5s both;
}

/* ════════════════════════════════════════════════════
   PIXEL PARTICLES  (.pixels-bg > .pixel-dot)
════════════════════════════════════════════════════ */
.pixels-bg {
  position: fixed; inset: 0;
  pointer-events: none; z-index: 0; overflow: hidden;
}
.pixel-dot {
  position: absolute; width: 5px; height: 5px; border-radius: 1px;
  animation: float-px linear infinite;
}
@keyframes float-px {
  0%   { transform: translateY(100vh) rotate(0deg);   opacity: 0; }
  10%  { opacity: 1; }
  90%  { opacity: 1; }
  100% { transform: translateY(-80px) rotate(360deg); opacity: 0; }
}

/* ════════════════════════════════════════════════════
   HEADER  (#main-header)
════════════════════════════════════════════════════ */
#main-header {
  position: fixed; top: 0; left: 0; right: 0;
  height: var(--header-h); z-index: 100;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 clamp(14px, 3vw, 40px);
  background: rgba(22,33,62,.97);
  backdrop-filter: blur(14px);
  border-bottom: 3px solid var(--border);
  box-shadow: 0 4px 30px rgba(0,0,0,.5);
}

/* .logo */
.logo {
  font-family: 'Press Start 2P', monospace;
  font-size: clamp(9px, 1.6vw, 17px);
  color: var(--yellow);
  text-shadow: var(--px-shadow), 0 0 14px rgba(247,201,72,.7);
  white-space: nowrap;
  animation: logo-glow 3s ease-in-out infinite;
}
@keyframes logo-glow {
  0%,100% { text-shadow: var(--px-shadow), 0 0 14px rgba(247,201,72,.6); }
  50%      { text-shadow: var(--px-shadow), 0 0 30px rgba(247,201,72,1); }
}

/* .header-right, .badge, .ls-tag, .ls-dot */
.header-right {
  display: flex; align-items: center;
  gap: clamp(6px, 1.5vw, 14px); flex-wrap: nowrap;
}
.badge {
  padding: 5px 10px; border-radius: 4px;
  font-family: 'Press Start 2P', monospace;
  font-size: clamp(6px, 1vw, 8px); letter-spacing: 1px;
  border: 2px solid; white-space: nowrap;
}
.badge-p5  { background: rgba(229,34,34,.15); border-color: var(--red);   color: var(--red); }
.badge-ml5 { background: rgba(44,214,83,.15);  border-color: var(--green); color: var(--green); }

.ls-tag {
  display: flex; align-items: center; gap: 7px;
  padding: 5px 12px;
  background: rgba(43,92,230,.15);
  border: 1px solid rgba(109,143,255,.35);
  border-radius: 20px;
  font-size: 11px; color: rgba(232,234,246,.65);
  white-space: nowrap;
}
.ls-dot {
  width: 8px; height: 8px; border-radius: 2px;
  background: linear-gradient(135deg, var(--blue), var(--sky));
  flex-shrink: 0;
}

@media (max-width: 420px) { .badge-p5, .badge-ml5 { display: none; } }

/* ════════════════════════════════════════════════════
   PAGE WRAPPER  (.page)
   Sits below fixed header
════════════════════════════════════════════════════ */
.page {
  position: relative; z-index: 5;
  padding-top: var(--header-h);
  min-height: 100vh;
}

/* ════════════════════════════════════════════════════
   HERO  (.game-hero)
════════════════════════════════════════════════════ */
.game-hero {
  text-align: center;
  padding: clamp(16px, 3vw, 32px) 16px clamp(12px, 2vw, 22px);
}
.game-hero h1 {
  font-family: 'Press Start 2P', monospace;
  font-size: clamp(11px, 2.8vw, 30px);
  line-height: 1.7; color: var(--yellow);
  text-shadow: 4px 4px 0 var(--red), 8px 8px 0 rgba(0,0,0,.5), var(--glow-gold);
  margin-bottom: 12px;
  animation: hero-pop .8s cubic-bezier(.175,.885,.32,1.275) both;
}
@keyframes hero-pop {
  from { transform: scale(.5) translateY(-30px); opacity: 0; }
  to   { transform: scale(1)  translateY(0);     opacity: 1; }
}
.game-hero p { color: rgba(232,234,246,.6); font-size: clamp(11px, 1.8vw, 15px); font-weight: 300; }
.game-hero p span { color: var(--sky); font-weight: 600; }

/* ════════════════════════════════════════════════════
   MAIN GRID  (.game-layout)

   Desktop  ≥ 1100px  → [canvas (flex-grow) | sidebar 380px]
   Tablet   600-1100  → canvas full, sidebar 2-col grid
   Mobile   < 600     → all stacked
════════════════════════════════════════════════════ */
.game-layout {
  display: grid;
  grid-template-columns: 1fr 380px;
  grid-template-areas: "canvas sidebar";
  gap: 22px;
  padding: 0 clamp(10px, 2.5vw, 30px) 50px;
  align-items: start;
}
@media (max-width: 1100px) {
  .game-layout {
    grid-template-columns: 1fr;
    grid-template-areas: "canvas" "sidebar";
  }
}

/* ── Canvas column (.canvas-col) ── */
.canvas-col { grid-area: canvas; }

/* .canvas-container — wraps #game-canvas */
.canvas-container {
  position: relative;
  border-radius: 12px; overflow: hidden;
  border: 4px solid var(--border);
  box-shadow:
    0 0 0 2px rgba(109,143,255,.2),
    0 20px 60px rgba(0,0,0,.8),
    inset 0 1px 0 rgba(255,255,255,.06);
  background: #6d8fff; /* sky colour while loading */
}
/* scanlines */
.canvas-container::after {
  content: ''; position: absolute; inset: 0; pointer-events: none; z-index: 3;
  background: repeating-linear-gradient(
    0deg, transparent, transparent 3px,
    rgba(0,0,0,.03) 3px, rgba(0,0,0,.04) 4px
  );
}

/* #game-canvas — p5 injects <canvas> here */
#game-canvas {
  display: block;
  width: 100%;
  min-height: 200px; /* prevents collapse before p5 loads */
}
#game-canvas canvas {
  display: block !important;
  width:  100% !important;
  height: auto !important;
}

/* .statusbar — HUD bar under canvas */
.statusbar {
  display: flex; justify-content: space-between;
  align-items: center; flex-wrap: wrap; gap: 8px;
  padding: 10px 18px;
  background: rgba(15,52,96,.97);
  border-top: 3px solid var(--border);
  font-family: 'Press Start 2P', monospace;
}
.stat { display: flex; align-items: center; gap: 8px; }
.stat-icon { font-size: 15px; }
.stat-lbl { font-size: 6px; color: rgba(232,234,246,.4); display: block; margin-bottom: 2px; }
.stat-val { font-size: clamp(9px, 1.4vw, 13px); color: var(--yellow); }
.stat-val.gold { color: var(--gold); }

/* ── Sidebar (.sidebar) ── */
.sidebar {
  grid-area: sidebar;
  display: flex; flex-direction: column; gap: 16px;
}
/* Tablet: sidebar becomes 2-col */
@media (max-width: 1100px) and (min-width: 600px) {
  .sidebar { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .card-camera { grid-column: 1 / -1; }
}

/* ── Panel card (.card) ── */
.card {
  background: rgba(22,33,62,.92);
  border: 2px solid var(--border);
  border-radius: 12px;
  padding: clamp(14px, 2vw, 22px);
  backdrop-filter: blur(8px);
  box-shadow: 0 6px 28px rgba(0,0,0,.4);
  position: relative; overflow: hidden;
}
/* top colour bar */
.card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, var(--blue), var(--sky), var(--yellow));
}

/* .card-title */
.card-title {
  font-family: 'Press Start 2P', monospace;
  font-size: clamp(7px, 1vw, 9px); color: var(--sky); letter-spacing: 2px;
  margin-bottom: 14px; display: flex; align-items: center; gap: 10px;
}
.card-title::after { content: ''; flex: 1; height: 1px; background: var(--border); }

/* ── Camera card (.card-camera) ── */
/* .cam-wrap — contains #game_console (video), overlays */
.cam-wrap {
  position: relative; border-radius: 10px; overflow: hidden;
  border: 3px solid var(--border); background: #000;
}
@media (min-width: 1101px) { .cam-wrap { aspect-ratio: 4/3; } }
@media (max-width: 1100px) { .cam-wrap { aspect-ratio: 16/9; } }
@media (max-width: 599px)  { .cam-wrap { aspect-ratio: 4/3; } }

/* #game_console — p5 injects <video> here */
#game_console {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
}
/* video inside #game_console */
#game_console video {
  position: absolute; inset: 0;
  width: 100% !important; height: 100% !important;
  object-fit: cover; display: block !important;
}

/* .cam-overlay — green corner brackets */
.cam-overlay { position: absolute; inset: 0; pointer-events: none; }
.cam-overlay::before, .cam-overlay::after {
  content: ''; position: absolute;
  width: 22px; height: 22px; border-color: var(--green); border-style: solid;
}
.cam-overlay::before { top: 8px; left: 8px; border-width: 3px 0 0 3px; }
.cam-overlay::after  { bottom: 8px; right: 8px; border-width: 0 3px 3px 0; }

/* .track-pulse — pulsing ring when face detected (#trackPulse) */
.track-pulse {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%,-50%);
  width: 44px; height: 44px; border-radius: 50%;
  border: 3px solid var(--green);
  animation: pulse-ring 1.8s ease-out infinite; opacity: 0;
  pointer-events: none;
}
.track-pulse.on { opacity: 1; }
@keyframes pulse-ring {
  0%   { transform: translate(-50%,-50%) scale(.4); opacity: 1; }
  100% { transform: translate(-50%,-50%) scale(2.6); opacity: 0; }
}

/* .track-status — text label (#trackStatus) */
.track-status {
  position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%);
  font-family: 'Press Start 2P', monospace; font-size: 7px;
  padding: 4px 9px; border-radius: 3px;
  background: rgba(0,0,0,.75); white-space: nowrap;
}
.track-status.ok        { color: var(--green);  border: 1px solid var(--green); }
.track-status.searching {
  color: var(--yellow); border: 1px solid var(--yellow);
  animation: blink 1s step-end infinite;
}
@keyframes blink { 50% { opacity: 0; } }

/* ── Play button (#start-btn, #game-status) ── */
#start-btn {
  font-family: 'Press Start 2P', monospace;
  font-size: clamp(10px, 1.5vw, 13px);
  padding: clamp(12px, 2vw, 16px) 24px;
  background: var(--red); color: #fff;
  border: none; border-radius: 8px; cursor: pointer;
  letter-spacing: 2px; text-transform: uppercase;
  width: 100%; display: block; margin-bottom: 10px;
  box-shadow: 0 6px 0 #8b0000, var(--glow-red);
  transition: transform .1s, box-shadow .1s;
}
#start-btn:hover  { background: #ff3333; transform: translateY(-2px); box-shadow: 0 8px 0 #8b0000, 0 0 28px rgba(229,34,34,.8); }
#start-btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #8b0000; }

/* #game-status — status text below play button */
#game-status {
  font-family: 'Press Start 2P', monospace;
  font-size: 7px; color: var(--yellow);
  text-align: center; min-height: 18px;
  animation: blink 1.6s step-end infinite;
}
#game-status.active { animation: none; color: var(--green); }

/* ── Live stats (.score-grid, .score-row, .score-key, .score-val) ── */
.score-grid { display: flex; flex-direction: column; gap: 10px; }
.score-row {
  display: flex; justify-content: space-between; align-items: center;
  padding: 9px 13px;
  background: rgba(15,52,96,.7);
  border-radius: 8px; border: 1px solid rgba(109,143,255,.15);
}
.score-key { font-family: 'Press Start 2P', monospace; font-size: 7px; color: rgba(232,234,246,.45); }
.score-val { font-family: 'Press Start 2P', monospace; font-size: clamp(10px, 1.5vw, 13px); color: var(--yellow); }
.score-val.red  { color: var(--red); }
.score-val.gold { color: var(--gold); }

/* .hearts, .heart — life icons */
.hearts { display: flex; gap: 5px; flex-wrap: wrap; }
.heart  { font-size: 18px; transition: transform .3s, filter .3s; }
.heart.alive { animation: heartbeat 2s ease-in-out infinite; }
.heart.lost  { filter: grayscale(100%) opacity(.3); transform: scale(.8); }
@keyframes heartbeat {
  0%,100% { transform: scale(1); }
  10%      { transform: scale(1.15); }
  20%      { transform: scale(1); }
}

/* ── Highscore (.hs-banner, .hs-label, .hs-val, #hs-val) ── */
.hs-banner {
  text-align: center; padding: 14px 0;
  background: linear-gradient(135deg,rgba(247,201,72,.12),rgba(22,33,62,.8));
  border: 2px solid var(--yellow); border-radius: 10px;
  box-shadow: 0 0 20px rgba(247,201,72,.12);
}
.hs-label { font-family: 'Press Start 2P', monospace; font-size: 7px; color: rgba(247,201,72,.6); letter-spacing: 2px; margin-bottom: 8px; }
.hs-val   { font-family: 'Press Start 2P', monospace; font-size: clamp(18px,3vw,26px); color: var(--yellow); text-shadow: var(--glow-gold); }

/* ── Steps (.steps, .step, .step-n, .step-t) ── */
.steps { display: flex; flex-direction: column; gap: 10px; }
.step  { display: flex; gap: 12px; align-items: flex-start; }
.step-n {
  width: 26px; height: 26px; border-radius: 4px; flex-shrink: 0;
  background: var(--blue);
  display: flex; align-items: center; justify-content: center;
  font-family: 'Press Start 2P', monospace; font-size: 9px; color: #fff;
  box-shadow: 0 3px 0 #1a3a8f;
}
.step-t { font-size: 12px; line-height: 1.55; color: rgba(232,234,246,.8); padding-top: 3px; }
.step-t strong { color: var(--sky); }

/* ── Controls (.ctrl-grid, .ctrl-item, etc.) ── */
.ctrl-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.ctrl-item {
  display: flex; align-items: center; gap: 10px;
  padding: 9px 11px;
  background: rgba(15,52,96,.6);
  border-radius: 8px; border: 1px solid rgba(109,143,255,.2);
  transition: border-color .2s, background .2s;
}
.ctrl-item:hover { border-color: var(--sky); background: rgba(15,52,96,.9); }
.ctrl-icon { font-size: 17px; flex-shrink: 0; }
.ctrl-lbl  { font-size: 11px; font-weight: 600; color: rgba(232,234,246,.8); }
.ctrl-sub  { font-size: 9px; color: var(--sky); margin-top: 2px; }

/* ════════════════════════════════════════════════════
   FOOTER
════════════════════════════════════════════════════ */
footer {
  position: relative; z-index: 5;
  text-align: center; padding: 24px 16px;
  border-top: 2px solid var(--border);
}
.footer-brand {
  display: flex; align-items: center; justify-content: center; gap: 8px;
  margin-bottom: 8px;
}
.footer-ls   { font-family: 'Press Start 2P', monospace; font-size: 9px; color: var(--sky); letter-spacing: 3px; }
.footer-sep  { color: rgba(232,234,246,.2); }
.footer-name { color: rgba(232,234,246,.45); font-size: 13px; }
.footer-copy { color: rgba(232,234,246,.25); font-size: 11px; }
.heart-red   { color: var(--red); }
